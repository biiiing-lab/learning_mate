<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:replace="layout/head :: head"></div>
<head>
    <meta charset="UTF-8">
    <title>Study Detail</title>
    <link rel="stylesheet" th:href="@{/bootstrap/css/style.css}" />
</head>
<body>
<div th:replace="layout/nav :: nav"></div>

<div class="container mt-5">
    <h1 class="detail-header" th:text="${list.title}">Study Title</h1><br>
    <hr>
    <br><br>
    <div class="detail-info">
        <div><dt>스터디 과목</dt>&nbsp;&nbsp;<dd th:text="${list.studySubject}">Subject</dd></div>
        <div><dt>진행 방식</dt>&nbsp;&nbsp;<dd th:text="${list.studyType}">Type</dd></div>
        <div><dt>모집 인원</dt>&nbsp;&nbsp;<dd th:text="${list.totalPeople}">0</dd></div>
        <div><dt>마감 날짜</dt>&nbsp;&nbsp;<dd th:text="${list.dueDate}">2023-01-01</dd></div>
        <div><dt>연락 방법</dt>&nbsp;&nbsp;<dd><a th:href="${list.contactLink}" th:text="${list.contactLink}" class="detail-link">Open Chat</a></dd></div>
    </div>
    <br><br><br><br>
    <div>
        <div>
            <h3 style="text-align: left; font-weight: bold;">스터디 소개</h3>
            <hr>
            <div id="contentBox" th:text="${list.content}">Content here</div>
            <hr>
        </div><br><br>
        <!-- 댓글 섹션 시작 -->
        <div class="comments-section">
            <h3 style="text-align: left; font-weight: bold;">댓글</h3>
            <hr>

            <!-- 댓글 입력 폼 -->
            <form id="commentForm" action="#" method="POST">
                <div class="mb-3">
                    <textarea class="form-control" id="commentText" name="comment" rows="3" placeholder="여기에 작성해주세요 ..."></textarea>
                </div>
                <div class="text-end">
                    <button type="submit" class="btn btn-outline-dark">등록</button>
                </div><br><br>
            </form>

            <!-- 제출된 댓글을 보여주는 영역 (예시) -->
            <div class="submitted-comments mt-4">
                <div th:each="comment : ${comments}">
                    <div class="comment">
                        <p class="comment-author" th:text="${comment.author}">작성자 이름</p>
                        <p class="comment-content" th:text="${comment.content}">댓글 내용</p>
                        <hr>
                    </div>
                </div>
                <!-- 서버에서 댓글 목록을 받아올 때 사용하는 Thymeleaf 문법으로 작성된 예시. 데이터와 연동 필요 -->
            </div>
        </div>
        <!-- 댓글 섹션 끝 -->
    </div>
</div><br><br><br><br>
<footer class="py-5 bg-dark">
    <div class="container"><p class="m-0 text-center text-white">Copyright &copy; Learning_Mate 2024</p></div>
</footer>
<script>
    // 특정 글자 수마다 줄바꿈 추가 함수
    function addLineBreaks(selector, maxChars) {
        const element = document.querySelector(selector);
        if (element) {
            let text = element.innerText;
            let newText = '';
            for (let i = 0; i < text.length; i += maxChars) {
                newText += text.substring(i, i + maxChars) + '\n';
            }
            element.innerText = newText;
        }
    }

    // 페이지 로드 시 실행
    document.addEventListener('DOMContentLoaded', function() {
        addLineBreaks('#contentBox', 149); // 10글자 마다 줄바꿈 추가
    });
</script>
</body>
</html>
